Watchman:
  Servers:
    BindAddress: ":8084"
    AdminAddress: ":9094"

  Telemetry:
    ServiceName: "watchman"

  Webui:
    BasePath: "/"

  Download:
    RefreshInterval: "12h"
    InitialDataDirectory: ""

    # Specify which lists to download and include in Watchman results
    # Examples: us_csl, us_ofac, us_non_sdn
    IncludedLists: []

    # Include any senzing formatted lists in Watchman's corpus
    # Senzing:
    #   - SourceList: "senzing-persons"
    #     Location: "file://pkg/sources/senzing/testdata/persons.jsonl"

  Search:
    # Tune these settings based on your available resources (CPUs, etc).
    # Usually a multiple (i.e. 2x, 4x) of GOMAXPROCS is optimal.
    Goroutines:
      Default: 10
      Min: 1
      Max: 25
    Embeddings:
      Enabled: false                            # Opt-in feature
      Provider:
        Name: ""                                # ollama, openai, openrouter, azure
        BaseURL: ""                             # API endpoint (required when enabled)
        APIKey: ""                              # Can be set via EMBEDDINGS_API_KEY env var
        Model: ""                               # Required: e.g., "text-embedding-3-small" (OpenAI) or "multilingual-e5-large" (Ollama)
        Dimension: 0                            # Required: must match model (e.g., 1536 for OpenAI, 1024 for e5-large)
        NormalizeVectors: true                  # L2 normalize if API doesn't
        Timeout: "30s"
        RateLimit:
          RequestsPerSecond: 10
          Burst: 20
        Retry:
          MaxRetries: 3
          InitialBackoff: "1s"
          MaxBackoff: "30s"
      CacheSize: 10000
      CrossScriptOnly: true   # Hybrid approach: embeddings for cross-script only
      SimilarityThreshold: 0.70
      BatchSize: 32
      IndexBuildTimeout: "10m"

  PostalPool:
    Enabled: false
    Instances: 2
    StartingPort: 10000
    StartupTimeout: "60s"
    RequestTimeout: "10s"
    BinaryPath: "" # POSTAL_SERVER_BIN_PATH is set in Dockerfile
    CGOSelfInstances: 1

  Geocoding:
    Enabled: false
    Provider:
      Name: "opencage"    # opencage, google, or nominatim
      APIKey: ""          # Can be set via GEOCODING_API_KEY env var
      BaseURL: ""         # Optional: override for self-hosted Nominatim
      Timeout: "10s"
    RateLimit:
      RequestsPerSecond: 1  # Free tier: 1/sec, Paid: up to 40/sec
      Burst: 5
    Cache:
      L1MaxSize: 10000      # In-memory LRU cache size
      L1TTL: "24h"          # TTL for L1 cache entries
      L2Enabled: true       # Persist to database (requires Database config)
